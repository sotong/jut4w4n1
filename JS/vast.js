(function(a){a.vast={}})(jwplayer);(function(b){var d=b.vast,a=b.utils,c=b.events;b.vast.adcontroller=function(N,E,Q){var h=N,P=Q,x=false,T=E,q=this,k,U,r,z,g,L=false,F,v,K,i=false,j,n,l={},O=false,J=false;h.onReady(S);P.style.width="100%";function S(){if(h.getRenderingMode()=="flash"){Q.style.visibility="hidden";return}if(E.debug){x=E.debug}F=new d.companion();C();var W=new d.configparser();W.parse(T);U=W.getSchedule();k=W.getOptParams();h.onBeforePlay(w);h.onTime(H);h.onBeforeComplete(f);h.onPlaylistItem(R);h.onPlaylistComplete(R)}function w(){var W=U.getPreRoll();if(!O&&W){O=true;j="pre";V(W)}}function H(W){var X=U.getNextMidRoll(W.position);if(X){j="mid";V(X)}}function f(){var W=U.getPostRoll();if(!J&&W){J=true;j="post";h.detachMedia();V(W)}}function R(){J=false;O=false;j="";U.reset()}function V(X){n=X._adTag;z=new d.vloader();z.addEventListener(c.COMPLETE,I);z.addEventListener(c.ERROR,A);var W=q.doReplacement(X._adTag);if(x){window.jwplayer["actualTag"]=W;window.jwplayer["originalTag"]=X._adTag}z.load(W)}q.doReplacement=function(X){var aa=h.getPlaylistItem(),W=window.location.href;X=q.doReplace(X,"__random-number__",Math.random()*Math.pow(10,18));X=q.doReplace(X,"__timestamp__",new Date().getTime());X=q.doReplace(X,"__page-url__",encodeURIComponent(W));X=q.doReplace(X,"__referrer__",encodeURIComponent(document.referrer));X=q.doReplace(X,"__player-height__",h.getHeight());X=q.doReplace(X,"__player-width__",h.getWidth());X=q.doReplace(X,"__domain__",encodeURIComponent(M()));if(k.companion){X=q.doReplace(X,"__companion-div__",k.companion.id)}else{X=q.doReplace(X,"__companion-div__","")}var ac=X.match(new RegExp(/__item-[a-z 0-9 A-Z]*__/g));for(var Z=0;ac&&Z<ac.length;Z++){var Y=ac[Z];var ad=Y.substring(7,Y.length-2);if(aa.hasOwnProperty(ad)&&aa[ad]&&(typeof aa[ad]=="string")){var ab=aa[ad];if(ab.length>1000){ab=ab.substring(0,1000)}X=q.doReplace(X,Y,encodeURIComponent(ab))}else{X=q.doReplace(X,Y,"")}}return X};q.doReplace=function(W,Y,X){return W.replace(Y,X)};q.jwPlayAd=function(X){var W={_adTag:X,_offset:0};if(h.isBeforeComplete()||j=="post"){j="post";J=true;h.detachMedia();V(W)}else{if(h.getState()==c.state.PLAYING){j="mid";V(W)}else{if(h.isBeforePlay()||j=="pre"){O=true;j="pre";V(W)}}}};function I(X){var W={sources:[]};v=X.data;a.foreach(X.data.media,function(ac,aa){var ab={};ab.file=aa.file;ab.type=aa.type;W.sources.push(ab)});if(!W.sources.length){h.dispatchEvent(c.JWPLAYER_AD_ERROR,{message:"Ad Error: Ad Tag Empty",tag:n});return}var Y=new b.playlist.item(W);var Z=a.filterSources(Y.sources);if(!Z.length){h.dispatchEvent(c.JWPLAYER_AD_ERROR,{message:"Ad Error: No Compatible Creatives",tag:n});return}r=h.loadInstream(W);r.onMute(G);r.onPlay(D);r.onComplete(m);r.onFullscreen(y);r.onPause(t);r.onTime(p);r.onClick(s);r.onError(u);o();if(X.data.trackers.impression){X.data.trackers.impression.push(K)}else{X.data.trackers.impression=new Array();X.data.trackers.impression.push(K)}if(x){window.jwplayer["trackingURL"]=K}g=new d.tracker(X.data.trackers,x)}function A(W){a.log(W);if(j=="post"){h.attachMedia()}h.releaseState();h.dispatchEvent(c.JWPLAYER_AD_ERROR,{message:"Ad Error: Invalid Ad Tag",tag:n})}function u(W){a.log("Error playing back video ad");L=false;if(j=="post"){h.attachMedia()}var X="Ad Error: Error Playing Ad Tag";if(W.message.indexOf("File could not be played")!=-1){X="Ad Error: Error Playing Creative"}h.dispatchEvent(c.JWPLAYER_AD_ERROR,{message:X,tag:n})}function s(W){if((W.hasControls&&h.getState()==c.state.PAUSED)||(!W.hasControls&&h.getState()!=c.state.PAUSED)){g.click();h.dispatchEvent(c.JWPLAYER_AD_CLICK,{tag:n});if(h.getState()!=c.state.PAUSED){r.pause()}window.open(v.clickthrough)}}function G(W){if(W.mute){g.mute()}else{g.unmute()}}function y(W){if(W.fullscreen){g.fullscreen()}}function t(){g.pause()}function D(W){if(!L){var X;if(v.companions){X=e(v.companions);h.dispatchEvent(c.JWPLAYER_AD_COMPANIONS,{tag:n,companions:X})}X=B(v.companions);if(k.companion&&X.length){i=F.addCompanion(k.companion,X)}L=true;g.impression();h.dispatchEvent(c.JWPLAYER_AD_IMPRESSION,{tag:n});g.start();g.creativeView()}else{if(W.OLDSTATE=="PAUSED"){g.resume()}}}function e(Z){var ab=[];for(var aa=0;aa<Z.length;aa++){var X=Z[aa];var Y=(X.type=="iframe"||X.type=="html")?X.type:"static";var W={width:X.width,height:X.height,type:Y,resource:X.source,click:X.clickthrough};ab.push(W)}return ab}function B(W){var Y=[];for(var X=0;W&&X<W.length;X++){if(W[X].type.indexOf("flash")<0){Y.push(W[X])}}return Y}function m(){g.complete();h.dispatchEvent(c.JWPLAYER_AD_COMPLETE,{tag:n});L=false;if(j=="post"){h.attachMedia()}}function p(W){var aa=W.position,X=W.duration,Y=k.dynamicMessage,Z=X-aa;g.time(aa,X);if(Z>0&&Y){r.setText(Y.replace(/xx/gi,Math.round(Z)))}h.dispatchEvent(c.JWPLAYER_AD_TIME,{tag:n,position:aa,duration:X})}function M(){var W=window.location.href;W=W.match(new RegExp(/^https?:\/\/([^\/]*)/));if(W.length>1){return W[1]}return""}function C(){var W=window.location.href;l.domain=M();l.trackingbase=W.match(/^https/)?"https://s.n.jwpltx.com/v1/adclient/ping.gif":"http://i.n.jwpltx.com/v1/adclient/ping.gif";var X=new a.key(b.key);l.account=X.token();var Y=X.edition();if(Y=="invalid"){l.edition=4}else{if(Y=="ads"){l.edition=3}else{if(Y=="premium"){l.edition=2}else{if(Y=="pro"){l.edition=1}else{l.edition=0}}}}l.hosting=b.defaults&&b.defaults.ph?b.defaults.ph:0}function o(){var W=new Object(),X=true;W.d=l.domain;W.c="vast";W.m="html5";W.a=l.account;W.co=i;W.p=j;W.ad=v.adsystem;W.type="linear";W.ph=l.hosting;W.ed=l.edition;K=l.trackingbase;a.foreach(W,function(Z,Y){if(X){K+="?";X=false}else{K+="&"}K+=Z;K+="=";K+=Y})}};b().registerPlugin("vast","6.3",b.vast.adcontroller,"vast.swf")})(jwplayer);(function(a){a.vast.companion=function(d){var i=this,g=a.utils,c,f;if(d){window.jwplayer["companionvast"]=[]}i.addCompanion=function(l,j){c=l;f=document.getElementById(c.id);if(!f){return false}for(var k=0;k<j.length;k++){if(e(j[k])){h(j[k]);return true}}return false};i.removeCompanion=function(){f.innerHTML=""};function b(l){l=l.creativeView;if(!l){return}for(var j=0;j<l.length;j++){var k=new Image();k.src=l[j];if(d){window.jwplayer["companionvast"].push(l[j])}}}function h(k){if(k.type=="html"){f.innerHTML=k.source;b(k.trackers);return}if(k.type=="iframe"){var l=document.createElement("iframe");l.height=c.height;l.width=c.width;l.src=k.source;l.scrolling="no";l.style.border="none";l.marginWidth=0;l.marginHeight=0;b(k.trackers);f.innerHTML="";f.appendChild(l);return}var j=new Image();j.src=k.source;if(g.exists(k.clickthrough)){j.onclick=function(m){var n=window.open(k.clickthrough,"_blank");n.focus()}}f.innerHTML="";f.appendChild(j);b(k.trackers)}function e(j){return j.width==c.width&&j.height==c.height}}})(jwplayer);(function(b){var a=b.utils;b.vast.configparser=function(){var e,c,d="Your video will resume in xx seconds.";this.parse=function(g){e=new b.vast.schedule();c={};c.dynamicMessage=d;if(g.companiondiv){var f={};f.id=g.companiondiv.id;f.height=g.companiondiv.height;f.width=g.companiondiv.width;c.companion=f}if(g.admessage){c.dynamicMessage=g.admessage}if(g.tag&&typeof g.tag=="string"){var h={};h._offSet="pre";h._adTag=g.tag;e.setPreRoll(h)}else{a.foreach(g.schedule,function(j,i){var k={};k._offSet=i.offset;if(i.ad&&typeof i.ad.tag=="string"){k._adTag=i.ad.tag}else{if(i.tag&&typeof i.tag=="string"){k._adTag=i.tag}else{a.log("Error: no ad tag provided");return}}switch(i.offset){case"pre":e.setPreRoll(k);break;case"post":e.setPostRoll(k);break;default:if(isNaN(i.offset)){}else{e.addMidRoll(k)}break}})}e.sort()};this.getSchedule=function(){return e};this.getOptParams=function(){return c}}})(jwplayer);(function(a){a.vast.schedule=function(){var d,c=new Array(),b=0,e;this.setPreRoll=function(f){d=f};this.getPreRoll=function(){return d};this.getPostRoll=function(){return e};this.getNextMidRoll=function(g){if(c.length>=b+1){var f=c[b];if(f._offSet<g){b++;return f}}};this.reset=function(){b=0};this.addMidRoll=function(f){c.push(f)};this.setPostRoll=function(f){e=f};this.sort=function(){c.sort(function(g,f){return g._offSet-f._offSet})}}})(jwplayer);(function(a){a.vast.tracker=function(h,f){var g=0,i=this;if(f){window.jwplayer["trackedvast"]={}}function b(j){if(h.hasOwnProperty(j)){return h[j]}return[]}function d(k){var m=b(k),j;if(f){window.jwplayer["trackedvast"][k]=[]}for(j=0;j<m.length;j++){var l=new Image();l.src=m[j];if(f){window.jwplayer["trackedvast"][k].push(m[j])}}}function e(m,l){var n=0.25*l,k=0.5*l,j=0.75*l;if(m>=n&&g<n){d("firstQuartile")}else{if(m>=k&&g<k){d("midpoint")}else{if(m>=j&&g<j){d("thirdQuartile")}}}g=m}function c(j){return function(){d(j)}}i.creativeView=c("creativeView");i.start=c("start");i.click=c("click");i.complete=c("complete");i.pause=c("pause");i.resume=c("resume");i.mute=c("mute");i.unmute=c("unmute");i.fullscreen=c("fullscreen");i.expand=c("expand");i.collapse=c("collapse");i.acceptInvitation=c("acceptInvitation");i.close=c("close");i.rewind=c("rewind");i.impression=c("impression");i.time=e}})(jwplayer);(function(b){var c=b.events,a=b.utils,d=b.vast;d.vloader=function(){var l=this,f,g={};function j(){a.extend(l,new c.eventdispatcher())}l.load=function(m){f=m;a.ajax(f,i,e)};function i(n){try{new d.vparser().parse(n.responseXML,g);if(g.wrappedURI){var m=a.getAbsolutePath(g.wrappedURI,f);delete g.wrappedURI;l.load(m)}else{h(g)}}catch(o){k(c.ERROR,"There was an error parsing VAST response")}}function e(m){k(c.ERROR,"VAST could not be loaded")}function h(m){if(m){k(c.COMPLETE,{data:m})}else{k(c.ERROR,"There was an error parsing VAST response")}}function k(m,n){return l.sendEvent(m,n)}j()}})(jwplayer);(function(c){var d=c.events,a=c.utils,b=a.extensionmap;c.vast.vparser=function(){var n=c.parsers,j=n.textContent;function k(o,p){if(!o){return[]}return o.getElementsByTagName(p)}function m(o,p){if(!o){return null}return o.getAttribute(p)}this.parse=function(s,r){var q=k(s,"VAST")[0]?k(s,"VAST")[0]:k(s,"VideoAdServingTemplate")[0],t=q.tagName=="VideoAdServingTemplate"?1:m(q,"version"),v=k(q,"Ad")[0],u=k(v,"InLine")[0],o=k(v,"Wrapper")[0],p=u?u:o,w;r.adsystem=j(k(s,"AdSystem")[0]);if(t==""||t>2||t<1){throw"Vast version not supported";return}if(p){if(t==2){g(p,r);e(p,"Impression",r.trackers);e(p,"Error",r.trackers)}else{h(p,r)}if(o){r.wrappedURI=j(k(o,"VASTAdTagURI")[0])||j(k(o,"VASTAdTagURL")[0])}}else{throw"Invalid VAST response"}};function e(r,q,s){var o=k(r,q),p;for(p=0;p<o.length;p++){i(s,q.toLowerCase(),j(o[p]))}}function i(q,p,o){if(!q[p]){q[p]=[]}q[p].push(o)}function g(s,p){var A=k(k(s,"Creatives")[0],"Creative"),t=p.trackers?p.trackers:{},w,r,q,u,v,o,x,y,z;for(r=0;r<A.length;r++){w=A[r];u=k(w,"Linear")[0];if(u){v=k(k(u,"TrackingEvents")[0],"Tracking");for(q=0;q<v.length;q++){o=v[q];i(t,m(o,"event"),j(o))}x=k(u,"VideoClicks")[0];y=j(k(x,"ClickThrough")[0]);z=j(k(x,"ClickTracking")[0]);if(y){p.clickthrough=y}if(z){i(t,"click",z)}f(u,p)}else{l(w,p)}}p.trackers=t}function h(s,q){var B=k(s,"Video")[0],u=q.trackers?q.trackers:{},v,r,p,o,z,t,x,w,y,A;v=k(k(s,"TrackingEvents")[0],"Tracking");for(r=0;r<v.length;r++){p=v[r];i(u,m(p,"event"),j(p).trim())}o=k(k(s,"Impression")[0],"URL");for(r=0;r<o.length;r++){p=o[r];i(u,"impression",j(p).trim())}z=k(k(s,"Error")[0],"URL");for(r=0;r<z.length;r++){p=z[r];i(u,"error",j(p).trim())}w=k(B,"VideoClicks")[0];y=j(k(w,"ClickThrough")[0]).trim();A=j(k(w,"ClickTracking")[0]).trim();if(y){q.clickthrough=y}if(A){i(u,"click",A)}f(B,q);t=k(s,"CompanionAds")[0];t=k(t,"Companion");if(!q.companions){q.companions=[]}for(r=0;r<t.length;r++){x=t[r];q.companions.push({width:parseInt(m(x,"width")),height:parseInt(m(x,"height")),type:m(x,"resourceType"),resource:j(k(x,"URL")[0]).trim(),trackers:[],clickthrough:""})}q.trackers=u}function f(p,q){var o=k(k(p,"MediaFiles")[0],"MediaFile"),t=q.media?q.media:[],r,s;for(s=0;s<o.length;s++){t.push({type:m(o[s],"type"),file:j(o[s])})}q.media=t}function l(x,q){var C=k(k(x,"CompanionAds")[0],"Companion"),z,t,r,A,B,s,o,p,w,w={},y,v,u=q.companions?q.companions:[];for(t=0;t<C.length;t++){z=C[t];A=k(z,"StaticResource")[0];B=k(z,"IFrameResource")[0];s=k(z,"HTMLResource")[0];if(A){o=m(A,"creativeType");p=j(A)}else{if(B){o="iframe";p=j(B)}else{if(s){o="html";p=j(s)}}}companionTrackerXML=k(k(z,"TrackingEvents")[0],"Tracking");for(r=0;r<companionTrackerXML.length;r++){y=m(companionTrackerXML[r],"event");i(w,y,j(companionTrackerXML[r]))}v=j(k(z,"CompanionClickThrough")[0]);u.push({width:parseInt(m(z,"width")),height:parseInt(m(z,"height")),type:o,source:p,trackers:w,clickthrough:v})}q.companions=u}}})(jwplayer);